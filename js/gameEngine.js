"use strict";var gameEngine={ele:null,allBullets:[],allEnemys:[],totalScore:0,init:function(){return this.ele=document.getElementById("main"),this},start:function(){console.log("游戏开始"),this.loading(function(){console.log("游戏加载完毕！"),console.log("进入游戏主界面");var e=new myPlane;e.init().move(),e.fire(),gameEngine.listenKeybord(),gameEngine.createEnemy(),gameEngine.crash(),gameEngine.moveBackground()})},loading:function(e){var n=document.createElement("div");gameEngine.ele.appendChild(n),n.className="logo";var l=document.createElement("div");gameEngine.ele.appendChild(l),l.className="load";var t=["images2/loading1.png","images2/loading2.png","images2/loading3.png"],a=0,o=setInterval(function(){a>=5?(clearInterval(o),gameEngine.ele.removeChild(n),gameEngine.ele.removeChild(l),e&&e()):l.style.backgroundImage="url("+t[++a%3]+")"},500)},listenKeybord:function(){var e=0,n=0;window.onkeydown=function(l){37==(l=l||event).keyCode?e=-10:39==l.keyCode?e=10:38==l.keyCode?n=-10:40==l.keyCode&&(n=10)},window.onkeyup=function(l){37==(l=l||event).keyCode||39==l.keyCode?e=0:38!=l.keyCode&&40!=l.keyCode||(n=0)},setInterval(function(){var l=new myPlane,t=l.ele.offsetLeft+e;t<0&&(t=0),t>gameEngine.ele.offsetWidth-l.ele.offsetWidth&&(t=gameEngine.ele.offsetWidth-l.ele.offsetWidth),l.ele.style.left=t+"px",l.ele.style.top=l.ele.offsetTop+n+"px"},30)},createEnemy:function(){setInterval(function(){Math.random()>.6&&new Enemy(Enemy.prototype.Enemy_Type_Large).init().move()},6e3),setInterval(function(){Math.random()>.5&&new Enemy(Enemy.prototype.Enemy_Type_Middle).init().move()},2e3),setInterval(function(){Math.random()>.3&&new Enemy(Enemy.prototype.Enemy_Type_Small).init().move()},1e3)},crash:function(){var e=setInterval(function(){for(var n=new myPlane,l=0;l<gameEngine.allEnemys.length;l++){for(var t=0;t<gameEngine.allBullets.length;t++)isCrash(gameEngine.allEnemys[l].ele,gameEngine.allBullets[t].ele)&&(gameEngine.allBullets[t].boom(),gameEngine.allBullets.splice(t,1),gameEngine.allEnemys[l].hurt());if(isCrash(gameEngine.allEnemys[l].ele,n.ele)){clearInterval(e),n.boom(function(){alert("Game Over!!")});break}}},30)},moveBackground:function(){var e=0;setInterval(function(){gameEngine.ele.style.backgroundPositionY=e+++"px"},30)}};